import{d as e,r as o,o as l,a as t,c as a,b as n,w as s,e as r,f as c,g as u,h as i,F as v,i as d,j as f,k as p,v as g,t as m,l as x}from"./vendor.780f57f3.js";!function(e=".",o="__import__"){try{self[o]=new Function("u","return import(u)")}catch(l){const t=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[o]=e=>new Promise(((l,n)=>{const s=new URL(e,t);if(self[o].moduleMap[s])return l(self[o].moduleMap[s]);const r=new Blob([`import * as m from '${s}';`,`${o}.moduleMap['${s}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){n(new Error(`Failed to import: ${e}`)),a(c)},onload(){l(self[o].moduleMap[s]),a(c)}});document.head.appendChild(c)})),self[o].moduleMap={}}}("assets/");var h=e({props:{stops:{type:Object,required:!1,default:()=>[{stop:0,color:"green"},{stop:1,color:"gold"}]}},setup(e,{emit:a}){const n=o(null),s=o(null);let r=new ResizeObserver((o=>{console.log("observe"),function(){if(!n.value)return;console.log("VIEW redraw");const o=n.value.clientWidth,l=n.value.clientHeight;n.value.width===o&&n.value.height===l||(n.value.width=o,n.value.height=l,c(s.value,e.stops))}()}));function c(e,o){let l=n.value.width,t=n.value.height,a=e.createLinearGradient(0,0,l,1);o.forEach((e=>a.addColorStop(e.stop,e.color))),e.fillStyle=a,e.fillRect(0,0,l,t)}return l((()=>{s.value=n.value.getContext("2d"),console.log("MOUNTED VIEW",e.stops,"canvas",n.value,"ctx",s.value),c(s.value,e.stops),r.observe(n.value)})),t((()=>{r&&r.disconnect()})),{canvas:n,canvasMousemove:function(e){let o=Math.abs(e.offsetX),l=s.value.getImageData(o,0,1,1).data,t=`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${l[3]})`,r=Math.ceil(o/n.value.width*100);a("over",{pos:r,color:t,x:o})}}}});const w=s("data-v-51fcc4af")(((e,o,l,t,s,c)=>(r(),a("div",null,[n("canvas",{ref:"canvas",onMousemove:o[1]||(o[1]=(...o)=>e.canvasMousemove&&e.canvasMousemove(...o)),style:{width:"300px",height:"20px"}},null,544)]))));var b,y;h.render=w,h.__scopeId="data-v-51fcc4af",(y=b||(b={}))[y.pinWidth=.5]="pinWidth",y[y.left=5]="left",y[y.leftCircle=5.25]="leftCircle",y[y.right=5]="right",y[y.newRange=89.5]="newRange",y[y.oldRange=100]="oldRange";const P=[{stop:0,color:"red"},{stop:.2,color:"blue"},{stop:.3,color:"blue"},{stop:.6,color:"green"},{stop:.6,color:"gold"},{stop:.8,color:"gold"},{stop:.8,color:"black"},{stop:.99,color:"black"},{stop:.99,color:"red"},{stop:.99,color:"red"}];var M=e({components:{PaletteView:h},setup(){let e=o([]);const t=c((()=>e.value.length?e.value:P)),a=e=>89.5*+e/100,n=o(null),{onDragPinStart:s,onDragPinEnd:r,onDragPin:i}=function(e){function o(e,o){var l=e.getScreenCTM();return o.touches&&(o=o.touches[0]),{x:(o.clientX-l.e)/l.a,y:(o.clientY-l.f)/l.d}}let l,t,a;function n(e,n){t=o(e,n);var s=l.transform.baseVal;if(0===s.length||s.getItem(0).type!==SVGTransform.SVG_TRANSFORM_TRANSLATE){var r=e.createSVGTransform();r.setTranslate(0,0),l.transform.baseVal.insertItemBefore(r,0)}a=s.getItem(0),t.x-=a.matrix.e,t.y-=a.matrix.f}return{onDragPinStart:function(o){var t,a,s,r;(null==(t=o.target)?void 0:t.classList.contains("draggable"))?(l=o.target,n(e.value,o),console.log("drag start",e.value)):(null==(s=null==(a=o.target)?void 0:a.parentNode)?void 0:s.classList.contains("draggable-group"))&&(l=null==(r=o.target)?void 0:r.parentNode,n(e.value,o),console.log("drag start",e.value))},onDragPin:function(n){if(l){n.preventDefault();var s=o(e.value,n);a.setTranslate(s.x-t.x,0),console.log("drag",s.x,t.x,s.x-t.x)}},onDragPinEnd:function(e){l&&(console.log("drag end"),l=null)}}}(n),v=o(null),d=o(null);function f(e,o){console.log("draw");let l=v.value.width,t=v.value.height,a=e.createLinearGradient(0,0,l,1);o.forEach((e=>a.addColorStop(e.stop,e.color))),e.fillStyle=a,e.fillRect(0,40,l,t),e.beginPath(),e.rect(0,0,20,20),e.fillStyle=g.value,e.fill()}l((()=>{d.value=v.value.getContext("2d"),console.log("mounted",t.value,"canvas",v.value,"ctx",d.value),f(d.value,t.value)})),u((()=>{d.value&&f(d.value,t.value)}));let p=o(0),g=o("");return{stripes:e,currentStripes:t,posPin:e=>`${5+a(100*e)}%`,posCircle:e=>`${5.25+a(100*e)}%`,onDragPinStart:s,onDragPinEnd:r,onDragPin:i,canvasMousemove:function(e){p.value=e.offsetX;let o=d.value.getImageData(e.offsetX,50,1,1).data;g.value=`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${o[3]})`,f(d.value,t.value),console.log("mousemove",e.offsetX,e.offsetY,o,g.value)},onOverColor:function(e){console.log(`from VIEW x:${e.x} idx:${e.pos} color:${e.color}`)},svg:n,canvas:v,defaultPalette:P}}});const D={class:"palette-editor"},E={id:"pal"},S=n("rect",{x:"5%",y:"50%",width:"90%",height:"40%",fill:"url(#pal)"},null,-1);M.render=function(e,o,l,t,s,c){const u=i("PaletteView");return r(),a("div",D,[(r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 80",class:"palette-svg",ref:"svg",onMousedown:o[1]||(o[1]=(...o)=>e.onDragPinStart&&e.onDragPinStart(...o)),onMousemove:o[2]||(o[2]=(...o)=>e.onDragPin&&e.onDragPin(...o)),onMouseup:o[3]||(o[3]=(...o)=>e.onDragPinEnd&&e.onDragPinEnd(...o)),onMouseleave:o[4]||(o[4]=(...o)=>e.onDragPinEnd&&e.onDragPinEnd(...o))},[n("defs",null,[n("linearGradient",E,[(r(!0),a(v,null,d(e.currentStripes,((e,o)=>(r(),a("stop",{key:o,offset:100*e.stop+"%","stop-color":e.color},null,8,["offset","stop-color"])))),128))])]),(r(!0),a(v,null,d(e.currentStripes,((o,l)=>(r(),a("g",{key:l,class:"draggable-group"},[n("circle",{cx:e.posCircle(o.stop),cy:"25",r:"6",fill:o.color,"stroke-width":"1",stroke:"black"},null,8,["cx","fill"]),n("rect",{x:`${e.posPin(o.stop)}`,y:"31",width:".5%",height:"40",fill:"black"},null,8,["x"])])))),128)),S],544)),n("canvas",{ref:"canvas",width:"200",height:"80",onMousemove:o[5]||(o[5]=(...o)=>e.canvasMousemove&&e.canvasMousemove(...o))},null,544),n(u,{onOver:e.onOverColor,stops:e.defaultPalette},null,8,["onOver","stops"])])};var R=e({components:{PaletteEditor:M},data:function(){return{}},setup:()=>({defs:f({fx:{label:"fx",value:.811,min:.01,max:2,step:.001},fy:{label:"fy",value:.53,min:.01,max:2,step:.001},fr:{label:"fr",value:.01,min:.01,max:1,step:.01},cx:{label:"cx",value:.06,min:.01,max:4,step:.01},cy:{label:"cy",value:.56,min:.01,max:4,step:.01},r:{label:"r",value:.84,min:.01,max:4,step:.01}})})});const $={class:"sample"},k={viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"main-svg"},V=n("stop",{offset:"0%","stop-color":"gold"},null,-1),C=n("stop",{offset:"10%","stop-color":"gold"},null,-1),G=n("stop",{offset:"10%","stop-color":"green"},null,-1),L=n("stop",{offset:"30%","stop-color":"green"},null,-1),O=n("stop",{offset:"30%","stop-color":"black"},null,-1),U=n("stop",{offset:"40%","stop-color":"black"},null,-1),I=n("stop",{offset:"40%","stop-color":"red"},null,-1),T=n("stop",{offset:"100%","stop-color":"red"},null,-1),_=n("circle",{cx:"5",cy:"5",r:"4",fill:"url('#myGradient')"},null,-1),j={class:"controls"},W={class:"ct-title"};R.render=function(e,o,l,t,s,c){const u=i("PaletteEditor");return r(),a("div",$,[(r(),a("svg",k,[n("defs",null,[n("radialGradient",{id:"myGradient",fx:e.defs.fx.value,fy:e.defs.fy.value,fr:e.defs.fr.value,cx:e.defs.cx.value,cy:e.defs.cy.value,r:e.defs.r.value},[V,C,G,L,O,U,I,T],8,["fx","fy","fr","cx","cy","r"])]),_])),n("div",j,[(r(!0),a(v,null,d(e.defs,((e,o)=>(r(),a(v,{key:o},[p(n("input",{type:"range","onUpdate:modelValue":o=>e.value=o,min:e.min,max:e.max,step:e.step},null,8,["onUpdate:modelValue","min","max","step"]),[[g,e.value]]),n("div",W,m(e.label),1),p(n("input",{type:"text",class:"ct-val","onUpdate:modelValue":o=>e.value=o},null,8,["onUpdate:modelValue"]),[[g,e.value]])],64)))),128))]),n(u)])};var N=e({name:"App",components:{RadialGradientEditor:R}});N.render=function(e,o,l,t,n,s){const c=i("RadialGradientEditor");return r(),a(c)},x(N).mount("#app");
